# 1 产品简介
## 1.1 产品概述
批量计算（BatchCompute）是一种适用于大规模并行批处理作业的分布式云服务。支持海量任务自动调度，资源管理和数据加载，并按实际使用量计费。
## 1.2 产品架构

 **产品入口：** 控制台、SDK、API。

**运行环境：** 云主机，用户可采用batch基础镜像或自定义镜像方式创建运行环境，支持windows\linux操作系统，用户程序运行在私有网络中。

**持久化存储：** 输入输出数据、用户程序包的持久化存储采用对象存储OSS或云文件服务CFS（linux使用CFS或OSS，win使用CFS）。

 ![产品架构](https://github.com/jdcloudcom/cn/blob/batch1125/image/Elastic-Compute/Batch-Compute/Architecture.png)
 


## 1.3 核心概念
**作业（Job）：** 用户提交batch工作的最小单位，作业由单个或多个由前后依赖关系的任务组成，通过DAG（有向无环图）为多个任务设置依赖关系，共同组成一个作业，依赖关系在作业提交时指定，不可修改。作业之间可指定优先级顺序。

**任务（Task）：** 任务（Task）是作业的基本组成单位，包含了实际在一台云主机上执行的应用程序的相关信息。

**实例：** 调度执行最小单元。一个任务包含一个或多个任务实例，一个任务实例运行在一台云主机上，同一任务的各个实例并行处理各自的输入数据。

**计算环境：** 由单台或多台云主机实例组成的计算集群。当任务配置指定了计算环境，任务实例会调度到指定计算环境的节点上执行；当没有指定计算环境时，Batch 会创建云主机实例用于执行任务实例，并默认在任务实例完成后销毁云主机实例。

**镜像：** 任务运行环境的模板。是一个基础的batch镜像或用户自定义镜像（包括batch agent）。

**任务模板：** 将常用的任务制作成任务模板，基于任务模板定制不同的任务，实现作业的快速提交。

## 1.4 产品优势

| 优势     | 批量计算                                                     | 自建计算集群                                                 |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 海量并发 | 依托京东云云主机海量计算资源，保证业务快速稳定执行。         | 海量计算资源的创建及维护需要巨额成本。                       |
| 易用安全 | 除计算环境外，批量计算还提供丰富的执行方法、多任务计算编排、日志及状态监控等，帮助用户在100% 网络逻辑隔离的私有网络中创建海量并发计算任务，快速安全执行。 | 自行开发批处理系统或依赖第三方工具，并自行进行集群安全建设。 |
| 成本优化 | 按需调用云主机资源，只需为您使用的计算及存储资源付费。       | 自建海量计算的大规模集群，资源及人力成本高，周期长 。        |
| 弹性伸缩 | 根据作业需求动态分配计算资源，任务完成即可释放。             | 需要自行预测计算量及所需的计算资源自建集群，容易造成计算量不足或闲置浪费。 |
| 完全托管 | 资源调度和流程调度全托管，用户只需定义并提交作业，即可查看分析运行结果。 | 手动或自行开发软件处理资源调度和流程调度，面对海量计算，投入大量精力和资源。 |


## 1.5 产品功能

### 1.5.1 运行作业

**提交作业**

batch使用云文件服务CFS和对象存储OSS作为持久化存储，linux系统请任意选择CFS或OSS作为数据的输入和输出，windows系统请使用CFS作为数据的输入和输出。

batch默认运行在云主机中，用户可将执行程序包置于对象存储OSS中，或在自定义镜像中安装任意软件，用来运行任意程序。

**管理作业**

用户可以通过控制台，查看已提交作业的运行情况，包括其中各任务的运行情况，任务中各实例的运行情况及日志，此外，还可对作业进行停止、重启或删除。



### 1.5.2 计算环境

若用户选用自动计算环境则启动任务运行作业时，每次均需要新启动云主机，会占用一定的时间（一般几分钟左右），如遇资源紧张时可能无法即可申请到资源，您提交作业后可能需要等待一段时间才能运行。自动计算环境的好处是，即用即启动，结束即刻销毁，节约成本，使用灵活。

若您想要提高运行效率，可以先创建好计算环境，指定需要的云主机数量和镜像ID，Batch会为您分配好机器并启动，这些机器会一直处于运行状态，一旦您提交作业上来，就可以直接运行，效率较高。


### 1.5.3 自定义镜像
用户提交作业或者创建集群时，可以使用批量计算官方提供的镜像，也可以使用自定义镜像。自定义镜像的好处是，可以自己安装需要的软件。


## 1.6 限制说明

| 限制类型 | 限额钟类                     | 限额                                 |
| -------- | ---------------------------- | ------------------------------------ |
| 计算环境 | 单用户最大计算环境数         | 10                                   |
|          | 单计算环境最大实例数         | 5000                                 |
|          | 单用户单地域最大并发实例数   | 20（云主机配额，如需提升请提交工单） |
| 作业     | 单用户最大作业数             | 100                                  |
|          | 单用户单作业最大任务数       | 10                                   |
|          | 单用户单地域单任务最大实例数 | 100                                  |



## 1.7 应用场景

**基因检测：** 调动海量计算资源快速完成基因大数据的处理；

**视频渲染：** 海量资源管理，计算任务调度,TB级数据在大量节点之间共享和并发访问；

**深度学习：** 适用于部署基于TensorFlow、Caffe、MXNet等框架的深度学习算法的离线批处理训练任务；

**金融服务：** 交易后分析，自动分析每天的交易费用、执行报告和市场绩效；

**生命科学：** 生物制药的药物筛选，快速地在小分子库中搜索以发现新药。


# 2 产品定价

批量计算服务本身完全免费。

批量计算调度作业过程中会根据用户配置的计算（云主机按配置计费）、存储（对象存储OSS、云文件服务CFS按量计费）资源，在对应产品线收取相应费用。


# 3 入门指南


# 4 操作指南

