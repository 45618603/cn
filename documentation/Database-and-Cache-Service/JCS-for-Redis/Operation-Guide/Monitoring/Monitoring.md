# 性能监控

云缓存Redis提供丰富的监控指标，通过控制台、OPENAPI您可以轻松获取监控信息，实时掌握实例运行状况，以控制台为例：

1. 登录 [Redis 控制台](https://redis-console.jdcloud.com/redis) ，定位目标实例

2. 点击实例名称进入实例详情页面

3. 在上方导航Tab页中，选择监控

4. 选择监控时间进行查看

5. 右上角可设置报警规则，可点击进入云监控报警规则页面


## 监控项

### redis 2.8 监控项

#### 监控组
redis 2.8提供多组监控组，您可以任意筛选切换监控组，详情如下表所示：

| 监控组       | 说明                                                         |
| ------------ | ------------------------------------------------------------ |
| 基础监控组   | 实例信息等基本监控信息，例如：内存使用情况、内网进出流量、QPS等 |
| Keys监控组   | 使用键值相关命令的监控信息，例如：del、dump等命令的调用次数    |
| String监控组 | 使用string数据类型相关命令的监控信息，例如：append、bitcount等命令的调用次数 |
| Hashes监控组 | 使用hash数据类型相关命令的监控信息，例如：hdel、hexists等命令的调用次数 |
| Lists监控组  | 使用list数据类型相关命令的监控信息，例如：lindex、linsert等命令的调用次数 |
| Sets监控组   | 使用set数据类型相关命令的监控信息，例如：sadd、scard等命令的调用次数 |
| Zset监控组   | 使用zset数据类型相关命令的监控信息，例如：zadd、zcard等命令的调用次数 |

#### 基础监控组监控项
默认监控项为基础监控项，包含实例的基本状态信息，详情如下表所示：

| 监控项               | 单位    | 说明                                     | 统计方法                                   |
| -------------------- | ------- | ---------------------------------------- | ------------------------------------------ |
| 实例内存使用量       | Bytes   | 实例已用内存                             | 采集时的内存使用量                         |
| 实例内存使用率       | %       | 实例已用内存与总内存的比率               | 采集时的内存使用率                         |
| 实例内网进出流量     | KBps    | 每秒通过内网流入、流出云缓存的流量       | 采集时接收（发送）数据的总量/监控周期      |
| 实例QPS              | count/s | 每秒访问次数                             | 采集时请求数/监控周期                      |
| 实例命中率           | %       | 请求命中缓存的概率                       | 监控周期内命中的请求数/请求总数            |
| 实例Key数量          | count   | 实例key目前的个数                        | 采集时key的个数                            |
| 实例过期Key数量      | count   | 设置了过期时间的key总数                  | 截止到采集时的累计值，实例重启后重新计算。 |
| 实例淘汰Key数量      | count   | 因内存满而淘汰的key总数                  | 截止到采集时的累计值，实例重启后重新计算。 |
| 实例命中次数         | count   | 命中的请求数                             | 监控周期内命中的请求数                     |
| 实例未命中次数       | count   | 未命中的请求数                           | 监控周期内未命中的请求数                   |
| 实例使用内存Rss      | Bytes   | 实际使用物理内存（包含共享库占用的内存） | 采集时的使用内存                           |
| 实例通过代理连接总数 | count   | 实例通过代理连接总数                     | 采集时连接总数                             |

#### 其他监控组

除基础监控组外，其它监控组均为特定类型的数据或者特定功能的监控指标，指标分为如下两类：

* 命令使用次数指标： 例如：Keys监控组中的del、dump、exists命令在一个监控周期内每秒使用次数。

* 命令响应时间指标：例如：Keys监控组中的del、dump、exists命令在一个监控周期内的平均响应时间。

### redis 4.0 监控项

redis 4.0版暂时仅包含基础监控项，详情如下表所示：

|       监控项       |                单位                | 说明 | 统计方法 |
| :----------------- | :--------------------------------- | :----------------- | :----------------- |
| 实例内存使用量 |  Byte      | 实例已用内存 | 采集时的内存使用量 |
| 实例内存使用率 |    %    | 实例已用内存与总内存的比率 | 采集时的内存使用率 |
| 实例内网进出流量 | KBps | 每秒通过内网流入、流出云缓存的流量 | 采集时接收（发送）数据的总量/监控周期 |
| 实例QPS |  count/s  | 每秒访问次数 | 采集时请求数/监控周期 |
| 实例命中率    |   %        | 请求命中缓存的概率 | 监控周期内命中的请求数/请求总数 |
| 实例key个数   |count       | 云缓存实例key目前的个数 | 采集时key的个数 |
| 实例过期Key数量 |count | 设置了过期时间的key总数 | 截止到采集时的累计值，实例重启后重新计算。 |


## 监控图

目前提供折线图展示，采样数据最小周期为1分钟，展示时长有最近1小时、6小时、12小时、1天、3天、7天和14天，并可自主选择日期范围；

更加详细的监控指标数据，请单击页面右侧“设置报警规则”跳转至至云监控菜单，单击“监控信息”tab页查看。

![监控图](https://github.com/jdcloudcom/cn/blob/redis-1/image/Redis/monitoring1.PNG)
